<!-- templates/doctor_verify.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Verify to View Account</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/verification.css') }}">
</head>
<body>
  <div id="starfield-container"></div>
  <div class="verify-wrapper">
    <div class="verify-box">
      <h2>Re-enter Password</h2>
      <p>For your security, please confirm your password to view sensitive account details.</p>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="flash-message {{ category }}">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form method="post" action="{{ url_for('doctors.verify_account_password') }}">
        <div class="form-group">
          <label for="verify_password">Password</label>
          <input
            id="verify_password"
            name="password"
            type="password"
            required
            autocomplete="current-password"
            autofocus
          >
        </div>
        <button class="login-btn" type="submit">Verify</button>
      </form>

      <div class="back-link" style="text-align: center; margin-top: 1.5rem;">
        <a href="{{ url_for('doctors.dashboard') }}">Cancel </a>
      </div>
    </div>
  </div>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
            const starfield = document.getElementById('starfield-container');
            if (starfield) {
                let stars = [];
                function generateStars() {
                    const starCount = 200;
                    for (let i = 0; i < starCount; i++) {
                        const star = document.createElement('div');
                        const size = Math.floor(Math.random() * 3) + 1;
                        star.classList.add('star', `s${size}`);
                        star.style.top = `${Math.random() * 100}%`;
                        star.style.left = `${Math.random() * 100}%`;
                        star.style.animationDelay = `${Math.random() * 3}s`;
                        star.style.animationDuration = `${Math.random() * 2 + 3}s`;
                        star.dataset.parallaxRate = size; 
                        starfield.appendChild(star);
                        stars.push(star); 
                    }
                }
                function handleMouseMove(e) {
                    const { clientX, clientY } = e;
                    const xRatio = (clientX - window.innerWidth / 2) / window.innerWidth;
                    const yRatio = (clientY - window.innerHeight / 2) / window.innerHeight;
                    stars.forEach(star => {
                        const parallaxRate = star.dataset.parallaxRate;
                        const x = xRatio * 40 * parallaxRate;
                        const y = yRatio * 40 * parallaxRate;
                        star.style.transform = `translate(${x}px, ${y}px)`;
                    });
                }
                 function handleMouseLeave() {
                    stars.forEach(star => {
                        star.style.transform = `translate(0, 0)`;
                    });
                }
                generateStars();
                document.body.addEventListener('mousemove', handleMouseMove);
                document.body.addEventListener('mouseleave', handleMouseLeave);
            }
        });
    </script>
  <script src="{{ url_for('static', filename='js/starfield-toggle.js') }}"></script>
</body>
</html>
